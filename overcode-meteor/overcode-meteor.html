<head>
  <title>overcode-meteor</title>
</head>

<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12">
            {{> gradedCount}}
            {{> rubric}}
        </div>
    </div>
    <div class="row">
        <div class="col-xs-6 solution-list">
            {{> incorrectSolutionsList}}
        </div>
        <div class="col-xs-6 solution-list">
            {{> correctSolutionsList}}
        </div>
    </div>
</div>
</body>

<template name="gradedCount">
Graded: {{numGraded}}/{{totalNum}}
</template>

<template name="correctSolutionsList">
    {{#each solutions}}
        {{#if correct}}
            {{> solution}}
        {{/if}}
    {{/each}}
</template>

<template name="incorrectSolutionsList">
    {{#each solutions}}
        {{#unless correct}}
            {{> solution}}
        {{/unless}}
    {{/each}}
</template>

<!-- <template name="solutionsList">
    {{#each solutions}}
        {{> solution}}
    {{/each}}
</template> -->

<!-- <template name="filteredSolutions">
    {{#each filteredSolutions}}
        {{> solution}}
    {{/each}}
</template> -->

<template name="solution">
<div class="stack-wrapper {{#if clicked}}clicked{{/if}}">
<span class="text-muted id-label">id: {{id}}</span>
<span class="text-muted auto-score">{{num_passed_tests}}/{{total_num_tests}} tests passed</span>
<form class="grade form-horizontal"  data-record-id="{{_id}}" data-id="{{id}}">
    <div class="form-group">
        <div class="col-xs-2 score-column">
            <input type="text" class="score-input form-control" name="score" placeholder="Score" value="{{score}}"/>
        </div>
        <div class="col-xs-7 comment-column">
            <input type="text" class="comment-input form-control" name="comment" placeholder="Comments" value="{{comment}}"/>
        </div>
        <div class="col-xs-2 dropdown-column">
            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Rubric <span class="caret"></span>
                </button>
                {{> rubric}}
            </div>
        </div>
        <div class="col-xs-1 graded-checkbox-column">
            <span class="glyphicon glyphicon-{{#if graded}}check{{else}}unchecked{{/if}}"></span>
        </div>
    </div>
</form>
<div class="stack {{#if correct}}correct{{else}}incorrect{{/if}}" id="{{id}}">
    <!-- {{#if closest}}
        <span class="closest text-muted">Closer to <a class="closer-to" data-closer={{closest}}>stack {{closest}}</a></span>
    {{/if}} -->
    <pre><div class="pin-button pull-right {{#unless clicked}}not-toggled{{/unless}}" data-id={{id}} title="Click to {{#if clicked}}unpin{{else}}pin{{/if}}"><span class="glyphicon glyphicon-pushpin"></span></div><code>{{#each lines}}<span class="{{#if hasDifferentIndent}}different-indent{{/if}}">{{{createSpace}}}</span><span class="{{#if sharedWithClickedStack phraseID}}dimmed{{/if}}">{{#with getPhraseFromID phraseID}}{{{code}}}
{{/with}}</span>{{/each}}</code></pre>
</div>
<div class="show-raw-wrapper">
    <button class="show-raw not-shown btn btn-xs btn-link">Show raw solution(s)</button>
</div>
<div>
    {{#each rawSolutions}}
        <pre class="raw-solution hidden"><code>{{this}}</code></pre>
    {{/each}}
</div>
</div>
</template>

<template name="rubric">
<ul class="rubric dropdown-menu dropdown-menu-right">
    {{#each rubricEntries}}
    <li>
        {{> rubricRow}}
    </li>
    {{/each}}
    <li><form class="new-deduction form-horizontal">
        <div class="form-group">
            <div class="col-xs-2">
                <input type="text" class="form-control input-sm deduction-value-input"/>
            </div>
            <div class="col-xs-8">
                <input type="text" class="form-control input-sm deduction-text-input" placeholder="New item"/>
            </div>
            <div class="col-xs-2">
                <button class="col-xs-2 add-deduction btn btn-default btn-sm">Add</button>
            </div>
        </div>
    </form></li>
</ul>
</template>

<template name="rubricRow">
    <div class="row">
        <div class="col-xs-1">
            <input type="checkbox" class="deduction-checkbox"/>
        </div>
        <div class="col-xs-1 deduction-value">
            {{pointValue}}
        </div>
        <div class="col-xs-10 deduction-text">
            {{text}}
        </div>
    </div>
</template>

